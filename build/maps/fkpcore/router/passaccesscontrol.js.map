{"version":3,"sources":["fkpcore/router/passaccesscontrol.js"],"names":["DEBUG","debug","passaccess","oridata","get","ctx","Fetch","fkproute","query","passdata","post","request","body","headers","login","response","set","success","message","error","getData"],"mappings":";;;;;;;;;;;;;;;;;AAAA,IAAMA,QAAQC,MAAM,8BAAN,CAAd;;AAEA,SAASC,UAAT,CAAoBC,OAApB,EAA6B;AAC3B,SAAO;AACLC;AAAA,0FAAK,iBAAeC,GAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBACkBC,MAAMF,GAAN,CAAUC,IAAIE,QAAd,EAAwBF,IAAIG,KAA5B,CADlB;;AAAA;AACCC,wBADD;AAAA,iDAEIA,QAFJ;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAL;;AAAA;AAAA;AAAA;;AAAA;AAAA,OADK;;AAMLC;AAAA,2FAAM,kBAAeL,GAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBACiBC,MAAMI,IAAN,CAAWL,IAAIE,QAAf,EAAyBF,IAAIM,OAAJ,CAAYC,IAArC,CADjB;;AAAA;AACAH,wBADA;;AAAA,sBAEAA,YAAYA,SAAS,CAAT,CAFZ;AAAA;AAAA;AAAA;;AAGF,oBAAIA,SAAS,CAAT,EAAYI,OAAZ,CAAoBC,KAAxB,EAA8B;AAC5BT,sBAAIU,QAAJ,CAAaC,GAAb,CAAiB,OAAjB,EAA0BP,SAAS,CAAT,EAAYI,OAAZ,CAAoBC,KAA9C,EAD4B,CAC0B;AACvD;AALC,kDAMKL,SAAS,CAAT,CANL;;AAAA;AAAA,sBAQEA,YAAYA,SAAS,CAAT,MAAc,EAR5B;AAAA;AAAA;AAAA;;AAAA,kDAQuC,EAACQ,SAAS,MAAV,EAAkBC,SAAS,YAA3B,EARvC;;AAAA;AAUJlB,sBAAM,IAAN,EAAY,kBAAZ;AAVI,kDAWG,EAACmB,OAAO,OAAR,EAAiBD,SAAS,iBAA1B,EAXH;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAN;;AAAA;AAAA;AAAA;;AAAA;AAAA;AANK,GAAP;AAoBD;;QAEsBE,O,GAAdlB,U","file":"../../../fkpcore/router/passaccesscontrol.js","sourcesContent":["const DEBUG = debug('fkp:router:passaccesscontrol')\n\nfunction passaccess(oridata) {\n  return {\n    get: async function(ctx){\n      let passdata = await Fetch.get(ctx.fkproute, ctx.query)\n      return passdata\n    },\n\n    post: async function(ctx){\n      let passdata = await Fetch.post(ctx.fkproute, ctx.request.body)\n      if (passdata && passdata[1]) {\n        if (passdata[0].headers.login){\n          ctx.response.set('login', passdata[0].headers.login); //设置response的header\n        }\n        return passdata[1]\n      } else {\n        if (passdata && passdata[1]==='') return {success: '1010', message: \"链接正确，但数据为空\"}\n      }\n      DEBUG('%s', 'java/php后端返回数据出错')\n      return {error: \"60002\", message: \"java或者php返回数据错误\"}\n    }\n  }\n}\n\nexport { passaccess as getData }\n"]}