{"version":3,"sources":["fkpcore/base/analyzedir/index.js"],"names":["fkp","url","_id","Cache","ifid","dirdata","set","console","log","index","path","require","bluebird","fs","promisifyAll"],"mappings":";;;;;;;uDAKA,iBAAqBA,GAArB,EAA0BC,GAA1B;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAEQC,eAFR,GAEc,gBAAcD,GAF5B;AAAA,6CAGWE,MAAMC,IAAN,CAAWF,GAAX,EAAgB,YAAI;AACzB,kBAAIG,UAAU,6BAAWJ,GAAX,CAAd;AACAE,oBAAMG,GAAN,CAAUJ,GAAV,EAAeG,OAAf;AACA,qBAAOA,OAAP;AACD,aAJM,CAHX;;AAAA;AAAA;AAAA;;AASI;AACAE,oBAAQC,GAAR;AAVJ,6CAWW,KAXX;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;kBAAeC,K;;;;;kBAeA,UAAST,GAAT,EAAa;AAC1B,SAAOS,KAAP;AACD,C;;AAnBD;;;;AAHA,IAAIC,OAAOC,QAAQ,MAAR,CAAX;AACA,IAAIC,WAAWD,QAAQ,UAAR,CAAf;AACA,IAAIE,KAAKD,SAASE,YAAT,CAAsBH,QAAQ,IAAR,CAAtB,CAAT","file":"../../../../fkpcore/base/analyzedir/index.js","sourcesContent":["let path = require('path')\nlet bluebird = require('bluebird')\nlet fs = bluebird.promisifyAll(require('fs'))\nimport {analyzeDir} from './_readhtmldir'\n\nasync function index(fkp, url){\n  try {\n    let _id = 'analyzeDir_'+url\n    return Cache.ifid(_id, ()=>{\n      let dirdata = analyzeDir(url)\n      Cache.set(_id, dirdata)\n      return dirdata\n    })\n  } catch (e) {\n    // debug('parsedir: ' + e.message)\n    console.log(e);\n    return false\n  }\n}\n\nexport default function(fkp){\n  return index\n}\n"]}